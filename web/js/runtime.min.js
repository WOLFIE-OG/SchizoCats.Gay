var upload_section=document.getElementById("upload_section"),upload_section_button=document.getElementById("upload_section_buttons"),main_section=document.getElementById("main_section"),main_section_buttons=document.getElementById("main_section_buttons"),cat_player_nearly=document.getElementById("cat_player_nearly"),player=document.getElementById("cat_player_actual"),next_cat=document.getElementById("next_cat_video"),copy_cat=document.getElementById("copy_cat_url"),drop_zone=document.getElementById("drop_zone"),loading=document.getElementById("loading_animation"),response_url=null;const files=[];function GetSetMedia(e){cat_player_nearly.style.display="none",loading.style.display="";let n=new XMLHttpRequest;n.open("GET",e,!0),n.onload=e=>{4===n.readyState&&(200===n.status?(cat_player_nearly.style.display="",loading.style.display="none",response=JSON.parse(n.responseText),response_url=`web/content/${response.file_id}.${response.ext}`,player.src=response_url.replace(/['"]+/g,""),player.play()):(player.stop(),cat_player_nearly.style.display="",loading.style.display="none",console.error(n.statusText),toastr.error("There was an error.","Error Fetching Cat \uD83D\uDE3F!")))},n.onerror=e=>{toastr.error(n.statusText,"Error Fetching Cat \uD83D\uDE3F!")},n.send(null)}function ChangeToHome(){upload_section.hidden=!0,upload_section_button.hidden=!0,main_section.hidden=!1,main_section_buttons.hidden=!1}function ChangeToUpload(){upload_section.hidden=!1,upload_section_button.hidden=!1,main_section.hidden=!0,main_section_buttons.hidden=!0}function Meow(){var e,n=new Audio((e=["web/audio/Cat_Meow_1.mp3","web/audio/Cat_Meow_2.mp3","web/audio/Cat_Meow_3.mp3","web/audio/Cat_Meow_4.mp3"])[Math.floor(Math.random()*e.length)]);n.volume=.2,n.play()}function MouseDown(){var e=new Audio("web/audio/Mouse_Click_Down.mp3");e.volume=.1,e.play()}function MouseUp(){var e=new Audio("web/audio/Mouse_Click_Up.mp3");e.volume=.1,e.play()}function dropHandler(e){e.preventDefault(),e.dataTransfer.items?[...e.dataTransfer.items].forEach((e,n)=>{if("file"===e.kind){let t=e.getAsFile();files.push(t)}}):[...e.dataTransfer.files].forEach((e,n)=>{files.push(e)}),drop_zone.innerText=`Files selected: (${files.length})`}function dragOverHandler(e){e.preventDefault()}player.volume=.5,document.addEventListener("click",e=>{9==Math.floor(10*Math.random())&&Meow()}),document.addEventListener("dblclick",e=>{function n(e,n){return Math.random()*(n-e)+e}confetti({angle:n(55,125),spread:n(50,70),particleCount:n(50,100),origin:{y:n(0,1),x:n(0,1)}});var t=new Audio("web/audio/Confetti.mp3");t.volume=.1,t.play()}),document.addEventListener("mousedown",e=>{MouseDown()}),document.addEventListener("mouseup",e=>{MouseUp()}),next_cat.addEventListener("click",e=>{GetSetMedia("api/get_cat")}),copy_cat.addEventListener("click",e=>{navigator.clipboard.writeText(player.src),toastr.options.onShown=function(){var e=new Audio("web/audio/Hi.mp3");e.volume=.1,e.play()},toastr.options.onHidden=function(){var e=new Audio("web/audio/Bye.mp3");e.volume=.1,e.play()},toastr.info("Copied media URL to clipboard!")}),upload_files.addEventListener("click",e=>{let n=new XMLHttpRequest,t=new FormData;n.open("POST","api/upload",!0),n.setRequestHeader("Accept","application/json"),n.onreadystatechange=()=>{4===n.readyState&&200===n.status&&(response=JSON.parse(n.responseText),toastr.success(`[${response.successfull} / ${response.total}] files uploaded.`,"Success!"),files.length=0,drop_zone.innerText="Drag and drop files.")};for(let a=0;a<files.length;a++)t.append("files",files[a]);n.send(t)}),window.addEventListener("load",e=>{GetSetMedia("api/get_cat"),new cursoreffects.rainbowCursor({})});